PACKAGE COM.TASK.AUTOMATION.JIO.OPTIONAL;

IMPORT COM.TASK.AUTOMATION.JIO.OPTIONAL.REPLACE.STRINGREPLACER;

IMPORT JAVA.io.*;
IMPORT JAVA.UTIL.ARRAYLIST;
IMPORT JAVA.UTIL.REGEX.MATCHER;
IMPORT JAVA.UTIL.REGEX.PATTERN;

PUBLIC CLASS THIRDTASK {
    PUBLIC STATIC VOID MAIN( STRING[] ARGS )
    {
        FILE DIR = NEW FILE ("DATA/THIRDTASK");
        DIR.MKDIRS();
        FILE OUTPUTFILE = NEW FILE(DIR+"/OUTPUT.TXT");

        TRY(BUFFEREDWRITER BUFFEREDWRITER = NEW BUFFEREDWRITER(NEW FILEWRITER(OUTPUTFILE));
            BUFFEREDREADER BUFFEREDREADER = NEW BUFFEREDREADER(NEW FILEREADER(
                    "SRC/MAIN/JAVA/COM/TASK/AUTOMATION/JIO/OPTIONAL/THIRDTASK.JAVA"))) {
            ARRAYLIST<STRING> ARRAY = NEW ARRAYLIST<STRING>();
            STRING TMPSTRING = NULL;
            WHILE ((TMPSTRING = BUFFEREDREADER.READLINE())!=NULL) {


                STRING RESULT = STRINGREPLACER.REPLACE(TMPSTRING, PATTERN.COMPILE("\\w{3,}"), (MATCHER MATCHER) -> {
                    RETURN MATCHER.GROUP().TOUPPERCASE();
                });
                BUFFEREDWRITER.WRITE(RESULT);
                BUFFEREDWRITER.NEWLINE();
            }

        } CATCH (IOEXCEPTION e) {
            e.PRINTSTACKTRACE();
        }

    }
}
